<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<footer th:fragment="footer" class="bg-holder">
    <div class="side">
        <a href="/home" class="home_btn"
           th:if="${currentUri != '/' and currentUri != '/home' and currentUri != '/index'}">
            <i class="xi-home-o"></i>
        </a>
        <a href="/reservation/" class="reservation_btn"><i class="xi-emoticon-happy"></i>ëŒ€ê´€í•˜ëŸ¬ê°€ê¸°</a>
        <a href="#" class="scroll-top"><button class="btn xi-arrow-up"></button></a>
    </div>

    <div class="footerBox copy">
        <a href="/home">
            <img src="/image/logo_1-2.png">
        </a>
        <p>Â©ManHwaBangCho</p>
        <div id="snsIcon">
            <a href="" class="xi-facebook"></a>
            <a href="" class="xi-instagram"></a>
            <a href="" class="xi-kakaotalk"></a>
            <a href="" class="xi-twitter"></a>
        </div>
    </div>
    <div class="footerBox info">
        <div class="footerBox myAccount">
            <div th:if="${loginMember != null and loginMember.grade == 10}">
                <a href="/admin/admin_index" target="_blank">ê´€ë¦¬ì í˜ì´ì§€</a>
            </div>
            <div th:if="${loginMember != null and loginMember.grade == 1}">
                <p><b>ë‚´ ì •ë³´</b></p>
                <p><a th:href="@{/api/member/mypage}">ë§ˆì´ í˜ì´ì§€</a></p>
                <p><a href="">ì˜ˆì•½ ì •ë³´ ì¡°íšŒ / ìˆ˜ì •</a></p>
            </div>
        </div>
        <div class="footerBox address">
            <p><b>ì£¼ì†Œ</b></p>
            <p>ê²½ìƒë‚¨ë„ ê³ ì„±êµ° ê±°ë¥˜ë©´ ì€í™©ê¸¸ 81-91</p>
            <p>(ìš°)52924 (ì§€ë²ˆ)ê±°ë¥˜ë©´ ì€ì›”ë¦¬ 17-8</p>
        </div>
        <div class="footerBox tel">
            <p><b>ì—°ë½ì²˜</b></p>
            <p>TEL : 051-610-1041</p>
            <p>Email : abcd1234@mail.com</p>
        </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <!--ì œì´ì¿¼ë¦¬ ìŠ¤í¬ë¡¤ íš¨ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚½ì…
    <script src="/js/jquery.scrollTo.min.js"></script>-->
    <script src="/js/comm.js"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3bf69ce9275feb61004f536b17f363b9"></script>
    <script>
        // ê³µí†µ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ê³ ì • ì°¸ì¡°)
        function checkScroll() {
          const header = document.querySelector("header");
          const nav = document.querySelector("nav");
          const mainSlide = document.querySelector("#ms1");
          if (!mainSlide || window.scrollY > mainSlide.offsetHeight - nav.offsetHeight) {
            header.classList.add("transparentNav");
          } else {
            header.classList.remove("transparentNav");
          }
        }

        function outsideClickHandler(e) {
          const header = document.querySelector("header");
          const gnb = document.getElementById("gnb");
          const itemsWithSub = Array.from(gnb.querySelectorAll("li")).filter(li => li.querySelector(".sub_nav_layer"));

          if (document.body.classList.contains('menu_open')) {
            const inside = e.target.closest("#gnb, .toggle.icon, #map");
            if (!inside) {
              gnb.classList.remove("active");
              header.classList.remove("closed");
              document.body.classList.remove("menu_open");
              itemsWithSub.forEach(li => li.classList.remove("active"));
            }
          }
        }

        function accordionHandler(e) {
          const li = e.currentTarget.closest('li');
          const sub = li.querySelector('.sub_group');
          if (sub) {
            e.preventDefault();
            const isActive = li.classList.contains('active');
            document.querySelectorAll('#gnb > li').forEach(item => {
              item.classList.remove('active');
              const s = item.querySelector('.sub_group');
              if (s) s.style.maxHeight = '0';
            });
            if (!isActive) {
              li.classList.add('active');
              sub.style.maxHeight = (sub.scrollHeight + 40) + 'px';
            }
          }
        }

        function toggleHandler(e) {
          e.preventDefault();
          const header = document.querySelector("header");
          const gnb = document.getElementById("gnb");
          header.classList.toggle('closed');
          gnb.classList.toggle('active');
          document.body.classList.toggle('menu_open');
        }

        // debounce ìœ í‹¸ë¦¬í‹°
        function debounce(fn, ms) {
          let timer;
          return function(...args) {
            clearTimeout(timer);
            timer = setTimeout(() => fn.apply(this, args), ms);
          };
        }

        // ë©”ë‰´ ì´ˆê¸°í™” í•¨ìˆ˜
        function initMenu() {
          const header = document.querySelector("header");
          const nav = document.querySelector("nav");
          const gnb = document.getElementById("gnb");
          const toggleBtn = document.querySelector('.toggle.icon');
          const navItems = document.querySelectorAll('#gnb .nav_item');
          const subMenuLinks = document.querySelectorAll('#gnb > li > strong > a');

          // ê³µí†µ ì´ˆê¸°í™”
          navItems.forEach(i => i.classList.remove('active'));
          document.body.classList.remove('menu_open');
          gnb.classList.remove('active');
          header.classList.remove('closed');

          if (window.innerWidth >= 765) {
            navItems.forEach(item => {
                // ëª¨ë°”ì¼ì—ì„œ ë‚¨ì•„ìˆë˜ ì¸ë¼ì¸ maxHeight ì œê±° ë¦¬ì‚¬ì´ì¦ˆ í–ˆì„ ë•Œ í”¼ì”¨ë²„ì „ ì„œë¸Œë©”ë‰´ ì˜¤ë¥˜ í•´ê²°ìš©
                const sub = item.querySelector('.sub_group');
                if (sub) sub.style.maxHeight = '';

                // ëª¨ë°”ì¼ì—ì„œ ë‚¨ì•„ìˆë˜ active í´ë˜ìŠ¤ ì œê±°
                item.classList.remove('active');
              });
            // ë°ìŠ¤í¬íƒ‘ ëª¨ë“œ: ìŠ¤í¬ë¡¤, hover
            window.removeEventListener('scroll', checkScroll);
            window.addEventListener('scroll', checkScroll);
            checkScroll();

            navItems.forEach(item => {
<!--              item.removeEventListener('mouseenter', desktopMouseEnter);-->
<!--              item.removeEventListener('mouseleave', desktopMouseLeave);-->
              item.addEventListener('mouseenter', desktopMouseEnter);
              item.addEventListener('mouseleave', desktopMouseLeave);
            });
          } else {
            // ëª¨ë°”ì¼ ëª¨ë“œ: ì™¸ë¶€ í´ë¦­, ì•„ì½”ë””ì–¸, í† ê¸€
            navItems.forEach(item => {
              item.removeEventListener('mouseenter', desktopMouseEnter);  // ğŸ”§ ìˆ˜ì •ë¨
              item.removeEventListener('mouseleave', desktopMouseLeave); // ğŸ”§ ìˆ˜ì •ë¨
            });
<!--            document.removeEventListener('click', outsideClickHandler);-->
            document.addEventListener('click', outsideClickHandler);

            if (toggleBtn) {
              toggleBtn.removeEventListener('click', toggleHandler);
              toggleBtn.addEventListener('click', toggleHandler);
            }

            subMenuLinks.forEach(link => {
              link.removeEventListener('click', accordionHandler);
              link.addEventListener('click', accordionHandler);
            });

            // í™œì„±ëœ ì„œë¸Œ ìë™ í¼ì¹¨
            document.querySelectorAll('#gnb > li.active .sub_group')
              .forEach(sub => sub.style.maxHeight = (sub.scrollHeight + 40) + 'px');
          }
        }

        // ë°ìŠ¤í¬íƒ‘ ë§ˆìš°ìŠ¤ enter/leave í•¸ë“¤ëŸ¬
        function desktopMouseEnter() {
          const navItems = document.querySelectorAll('#gnb .nav_item');
          navItems.forEach(i => i.classList.remove('active'));
          this.classList.add('active');
        }
        function desktopMouseLeave() {
          this.classList.remove('active');
        }

        // ì´ˆê¸° ë°”ì¸ë”©
        document.addEventListener('DOMContentLoaded', initMenu);
        window.addEventListener('resize', debounce(initMenu, 300));
                      //ì¹´ì¹´ì˜¤ ë§µ
              (function() {
                  var kakaoMapContainer = document.getElementById('map'); // ì§€ë„ë¥¼ ë‹´ì„ ì˜ì—­ì˜ DOM ë ˆí¼ëŸ°ìŠ¤
                  var kakaoMapOptions = { // ì§€ë„ë¥¼ ìƒì„±í•  ë•Œ í•„ìš”í•œ ê¸°ë³¸ ì˜µì…˜
                    center: new kakao.maps.LatLng(34.960922, 128.385499), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ.
                    level: 3 // ì§€ë„ì˜ ë ˆë²¨(í™•ëŒ€, ì¶•ì†Œ ì •ë„)
                  };

                  var kakaoMapInstance = new kakao.maps.Map(kakaoMapContainer, kakaoMapOptions);

                  // ë§ˆì»¤ ì´ë¯¸ì§€ ì„¤ì •
                  var kakaoImageSrc = '/image/marker.png'; // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤
                  var kakaoImageSize = new kakao.maps.Size(64, 69); // ë§ˆì»¤ì´ë¯¸ì§€ì˜ í¬ê¸°ì…ë‹ˆë‹¤
                  var kakaoImageOption = { offset: new kakao.maps.Point(27, 69) }; // ë§ˆì»¤ì´ë¯¸ì§€ ì˜µì…˜

                  var kakaoMarkerImage = new kakao.maps.MarkerImage(kakaoImageSrc, kakaoImageSize, kakaoImageOption);
                  var kakaoMarkerPosition = new kakao.maps.LatLng(34.960378, 128.385466); // ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ì…ë‹ˆë‹¤

                  var kakaoMarker = new kakao.maps.Marker({
                    position: kakaoMarkerPosition,
                    image: kakaoMarkerImage
                  });
                  kakaoMarker.setMap(kakaoMapInstance);

                  // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ ë‚´ìš©
                  var kakaoOverlayContent = `
                    <div class="customOverlayWrap">
                      <div class="customOverlayInfo">
                        <div class="customOverlayTitle">
                          ë§Œí™”ë°©ì´ˆ
                          <div class="customOverlayClose" onclick="kakaoOverlayClose()" title="ë‹«ê¸°"></div>
                        </div>
                        <div class="customOverlayBody">
                          <div class="customOverlayImg">
                            <img src="/image/logo_1-2_mo.png" width="73" height="70">
                          </div>
                          <div class="customOverlayDesc">
                            <div class="ellipsis">ê²½ë‚¨ ê³ ì„±êµ° ê±°ë¥˜ë©´ ì€í™©ê¸¸ 82-91</div>
                            <div class="jibun linkBox">
                              <div class="jibun ellipsis">(ì§€ë²ˆ)ê±°ë¥˜ë©´ ì€ì›”ë¦¬ 17-5</div>
                              <a href="https://kko.kakao.com/-eU_FnkAY7" target="_blank" class="link"><i class="xi-search"></i></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  `;

                  var kakaoOverlayPosition = new kakao.maps.LatLng(34.960394, 128.385516);
                  var kakaoCustomOverlay = new kakao.maps.CustomOverlay({
                    map: kakaoMapInstance,
                    position: kakaoOverlayPosition,
                    content: kakaoOverlayContent,
                    yAnchor: 1
                  });

                  // ì§€ë„ íƒ€ì… ë³€ê²½ í•¨ìˆ˜
                  window.setMapType = function(maptype) {
                    var roadmapControl = document.getElementById('btnRoadmap');
                    var skyviewControl = document.getElementById('btnSkyview');
                    if (maptype === 'roadmap') {
                      kakaoMapInstance.setMapTypeId(kakao.maps.MapTypeId.ROADMAP);
                      roadmapControl.className = 'selected_btn';
                      skyviewControl.className = 'btn';
                    } else {
                      kakaoMapInstance.setMapTypeId(kakao.maps.MapTypeId.HYBRID);
                      skyviewControl.className = 'selected_btn';
                      roadmapControl.className = 'btn';
                    }
                  };

                  // í™•ëŒ€, ì¶•ì†Œ í•¨ìˆ˜
                  window.zoomIn = function() {
                    kakaoMapInstance.setLevel(kakaoMapInstance.getLevel() - 1);
                  };
                  window.zoomOut = function() {
                    kakaoMapInstance.setLevel(kakaoMapInstance.getLevel() + 1);
                  };

                  window.kakaoOverlayClose = function() {
                    kakaoCustomOverlay.setMap(null);
                  };

                  kakao.maps.event.addListener(kakaoMarker, 'click', function() {
                    kakaoCustomOverlay.setMap(kakaoMapInstance);
                  });
                  kakaoMapContainer.addEventListener('wheel', function(e) {
                    e.stopPropagation(); // ë²„ë¸”ë§ ë°©ì§€
                  }, { passive: false });
                      kakaoMapContainer.addEventListener('mouseenter', function() {
                      document.body.style.overflow = 'hidden';
                    });
                    kakaoMapContainer.addEventListener('mouseleave', function() {
                      document.body.style.overflow = '';
                    });
                })();


                // ë’¤ë¡œê°€ê¸° ë²„íŠ¼
                function goBack() {
                  history.back();
                }

    </script>


    <th:block layout:fragment="js">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

        <!--íŒ¨ëŸ´ë ‰ìŠ¤ ìŠ¤í¬ë¡¤ë§ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„í´íŠ¸-->
        <script src="/js/jquery.parallax-scroll.min.js"></script>
        <!--íœ  íš¨ê³¼ ì„í´íŠ¸-->
        <script src="/js/wheel.js"></script>
    </th:block>
</footer>
</html>